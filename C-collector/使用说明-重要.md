# âš ï¸ é‡è¦ï¼šACLæƒé™é…ç½®é—®é¢˜

## ğŸš¨ å‘ç°çš„é—®é¢˜

æ ¹æ® `A-deploy/iot-project/deploy/broker/acl` é…ç½®ï¼š

```
user publisher
topic write ingest/env/#    # publisheråªèƒ½å‘å¸ƒåˆ° ingest/env/#

user collector  
topic read env/#            # collectoråªèƒ½è®¢é˜… env/#
```

**é—®é¢˜ï¼š** Publisherå’ŒCollectorçš„topicä¸åŒ¹é…ï¼éœ€è¦ä¸€ä¸ªProxyæœåŠ¡è½¬å‘ã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨Adminç”¨æˆ·ï¼ˆæœ€ç®€å•ï¼‰â­

ä¿®æ”¹ `collector.py` å’Œ `publisher` éƒ½ä½¿ç”¨ `admin` ç”¨æˆ·ï¼ˆæœ‰å…¨éƒ¨æƒé™ï¼‰ï¼š

**collector.py:**
```python
USERNAME = "admin"
PASSWORD = "admin123"  # æ ¹æ®å®é™…å¯†ç ä¿®æ”¹
SUBSCRIBE_TOPIC = "env/#"
```

**read_data.py / publisher_all.py:**
```python
USERNAME = "admin"
PASSWORD = "admin123"
```

ç„¶åtopicä¿æŒï¼š
- Publisherå‘é€åˆ°: `env/temperature`, `env/humidity`, `env/pressure`
- Collectorè®¢é˜…: `env/#`

---

### æ–¹æ¡ˆ2ï¼šå¯åŠ¨ProxyæœåŠ¡ï¼ˆæŒ‰åŸè®¾è®¡ï¼‰

éœ€è¦å¯åŠ¨ `A-deploy/iot-project/deploy/proxy` æœåŠ¡æ¥è½¬å‘æ¶ˆæ¯ï¼š

```
Publisher (publisher) â†’ ingest/env/# 
    â†“
Proxy (proxy) â†’ è¯»å– ingest/env/#ï¼Œè½¬å‘åˆ° env/#
    â†“
Collector (collector) â†’ è®¢é˜… env/#
```

---

### æ–¹æ¡ˆ3ï¼šä¿®æ”¹ACLé…ç½®ï¼ˆéœ€è¦æœåŠ¡å™¨æƒé™ï¼‰

ä¿®æ”¹Brokerçš„ACLæ–‡ä»¶ï¼Œå…è®¸ï¼š

```
user publisher
topic write env/#    # æ”¹ä¸ºç›´æ¥å‘å¸ƒåˆ°env

user publisher
topic read env/#     # æˆ–è€…è®©publisherä¹Ÿèƒ½è®¢é˜…ï¼ˆæµ‹è¯•ç”¨ï¼‰
```

ç„¶åé‡å¯MosquittoæœåŠ¡ã€‚

---

## ğŸ¯ æ¨èåšæ³•

**Day 2é˜¶æ®µå»ºè®®ä½¿ç”¨æ–¹æ¡ˆ1ï¼ˆAdminç”¨æˆ·ï¼‰**

1. ä¸éœ€è¦é¢å¤–çš„ProxyæœåŠ¡
2. é…ç½®ç®€å•
3. ä¸“æ³¨äºéªŒè¯Collectorå’ŒPublisheråŠŸèƒ½

**Day 3åŠä»¥åå†è€ƒè™‘ä½¿ç”¨æ–¹æ¡ˆ2ï¼ˆå®Œæ•´æ¶æ„ï¼‰**

---

## ğŸ“ å½“å‰åº”è¯¥æ€ä¹ˆåš

1. **ç¡®è®¤adminç”¨æˆ·å¯†ç **ï¼ˆå¯èƒ½åœ¨å¯†ç æ–‡ä»¶æˆ–æ–‡æ¡£ä¸­ï¼‰

2. **ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶ï¼š**

`C-collector/collector.py` (ç¬¬16-18è¡Œ):
```python
USERNAME = "admin"
PASSWORD = "adminçš„å®é™…å¯†ç "
```

`B-publisher/read_data.py` (ç¬¬11-12è¡Œ):
```python
USERNAME = "admin"
PASSWORD = "adminçš„å®é™…å¯†ç "
```

`B-publisher/publisher_all.py` (ç¬¬9-10è¡Œ):
```python
USERNAME = "admin"
PASSWORD = "adminçš„å®é™…å¯†ç "
```

3. **é‡æ–°è¿è¡Œæµ‹è¯•**

---

## ğŸ” æŸ¥æ‰¾å¯†ç 

å¯†ç å¯èƒ½åœ¨ï¼š
- `A-deploy/iot-project/deploy/broker/password_file`
- `A-deploy/iot-project/deploy/broker/README.md`
- é¡¹ç›®æ–‡æ¡£ä¸­

æˆ–è€…è”ç³»AåŒå­¦ï¼ˆè´Ÿè´£Brokeréƒ¨ç½²çš„äººï¼‰è·å–adminå¯†ç ã€‚

